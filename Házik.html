<html>

	<head>
		<style>
			#table1
			{
				width:413px;
				border-style:solid;
				text-align:center;
				margin:10px auto 25px auto;
			}
			
			#table2
			{
				table-layout:fixed;
				width:800px;
				text-align:center;
				margin:10px auto 0px auto;
			}
		</style>
		
		<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
	</head>
	
	<body onload="init()">
		<table id="table1">
		<tr>
		<td>Tantárgy</td>	<td>Házi</td>	<td>Határidő</td>	<td>Prioritás</td>
		</tr>
		<tr>
		<td><input id="text1" type="text" /></td>	<td><input id="text2" type="text" /></td>	<td><input id="addDeadline" type="date" /> </td>	
		<td><select id="addPrior">
			<option>Alacsony</option>
			<option>Közepes</option>
			<option>Magas</option>
		</select></td>
		</td>	<td><input id="addButton" value="Hozzáadás" type="submit" onclick="addClick()" /></td>
		</tr>
		</table>
		
		<table id="table2">
		<tr>
		<td>
		<div id="subjectSort" onclick="sortBySubject(this.id)" style="cursor:pointer; width:61px; margin:auto;"><b>Tantárgy</b></div>
		</td>
		<td>
		<div id="homeworkSort" onclick="sortByHomework(this.id)" style="cursor:pointer; width:30px; margin:auto;"><b>Házi</b></div>
		</td>
		<td>
		<div id="deadlineSort" onclick="sortByDeadline(this.id)" style="cursor:pointer; width:60px; margin:auto;"><b>Határidő</b></div>
		</td>
		<td>
		<div id="doneSort" onclick="sortByDone(this.id)" style="cursor:pointer; width:34px; margin:auto;"><b>Kész</b></div>
		</td>
		</tr>
		</table>
		
		<script>
				function init()
				{
					var newDate = new Date();
					 
					var year = newDate.getFullYear();
					var month = makeTwoDigit( newDate.getMonth() + 1 );
					var day = makeTwoDigit( newDate.getDate() );
					 
					var currentDate = year + "-" + month + "-" + day;
					window.currentDate = currentDate;
					document.getElementById( "addDeadline" ).value = currentDate;
				}
				
				function makeColor( id, color )
				{
					var trStyle = document.getElementById( id );
					var styleAttribute = document.createAttribute( "style" );
					styleAttribute.value = "color:" + color + ";";
					trStyle.setAttributeNode( styleAttribute );
				}
				
				function makeTwoDigit( input )
				{
					if( input < 10 )
					{
						return ( "0" + input );
					}
					
					else
					{
						return input;
					}
				}
				
				var valuesArray = [];
				
				function addClick()
				{
					var addWhileNotEnd = true;
					var addWhileId = 0;

					while ( addWhileNotEnd === true )
					{
						addWhileId++;
						window.addWhileId = addWhileId;
						
						if ( document.getElementById( "deleteButton" + addWhileId ) === null )
						{
							if ( document.getElementById( "text1" ).value.length === 0 && document.getElementById( "text2" ).value.length === 0 )
							{
								alert( "Nem írtál be semmit!" );
								addWhileNotEnd = false;
							}
							
							else if ( document.getElementById( "text1" ).value.length === 0 )
							{
								alert( "Nem írtál be tantárgyat!" );
								addWhileNotEnd = false;
							}
							
							else if ( document.getElementById( "text2" ).value.length === 0 )
							{
								alert( "Nem írtál be házit!" );
								addWhileNotEnd = false;
							}
								
							else
							{
								var homeworkTable = document.getElementById( "table2" );
								homeworkTable.style = "border-width:5px;";
								homeworkTable.innerHTML +=
									[
									'<tr id="tr">',
									'<td id="subject" onclick ="editClick(this.id)">',
									document.getElementById( "text1" ).value,
									'</td>',
									'<td id="homework" onclick ="editClick(this.id)">',
									document.getElementById( "text2" ).value,
									'</td>',
									'<td id="deadline" onclick ="editClick(this.id)">',
									document.getElementById( "addDeadline" ).value.replace( /\-/g, "." ) + ".",
									'</td>',
									'<td>',
									'<input type="checkbox" onclick="doneClick(this.id)" id="done" />',
									'</td>',
									'<td>',
									'<input type="button" value="Törlés" onclick="deleteClick(this.id)" id="deleteButton" />',
									'</td>',
									'</tr>'
									].join( "" );
								document.body.appendChild(homeworkTable);
								
								if ( document.getElementById( "addPrior" ).value === "Közepes" )
								{
									makeColor( "tr", "orange" );
								}
								
								else if ( document.getElementById( "addPrior" ).value === "Magas" )
								{
									makeColor( "tr", "red" );
								}
								
								document.getElementById( "tr" ).id += addWhileId;
								document.getElementById( "deleteButton" ).id += addWhileId;
								document.getElementById( "subject" ).id += addWhileId;
								document.getElementById( "homework" ).id += addWhileId;
								document.getElementById( "deadline" ).id += addWhileId;
								document.getElementById( "done" ).id += addWhileId;
								
								valuesArray[ addWhileId ] = [];
								
								valuesArray[ addWhileId ][ 1 ] = document.getElementById( "text1" ).value;
								valuesArray[ addWhileId ][ 2 ] = document.getElementById( "text2" ).value;
								valuesArray[ addWhileId ][ 3 ] = document.getElementById( "addDeadline" ).value;
								valuesArray[ addWhileId ][ 5 ] = document.getElementById( "addPrior" ).value;
								
								for ( var i = 1; i < addWhileId; i++ )
								{
									if ( valuesArray[ i ][ 4 ] === true )
									{
										document.getElementById( "done" + i ).checked = "true";
									}
								}
								
								document.getElementById( "text1" ).value = "";
								document.getElementById( "text2" ).value = "";
								document.getElementById( "addDeadline" ).value = currentDate;
								document.getElementById( "addPrior" ).value = "Alacsony";
								
								addWhileNotEnd = false;
							}
						}
					}
				}
				
				function doneClick( clickedId )
				{
					var doneId = document.getElementById( clickedId ).id.replace( "done", "" );
					
					if ( document.getElementById( clickedId ).checked === true )
					{
						makeColor( "tr" + doneId, "#C8C8C8" );
						valuesArray[ doneId ][ 4 ] = document.getElementById( "done" + doneId ).checked;
					}
					
					else if ( valuesArray[ doneId ][ 5 ] === "Közepes" )
					{
						makeColor( "tr" + doneId, "orange" );
					}
					
					else if ( valuesArray[ doneId ][ 5 ] === "Magas" )
					{
						makeColor( "tr" + doneId, "red" );
					}
					
					else
					{
						makeColor( "tr" + doneId, "#000000" );
					}
				}
				
				function deleteClick( clickedId )
				{
					var deleteQuestion = confirm( "Biztosan törlöd?" );
					
					if ( deleteQuestion === true )
					{
						var deletableElement = document.getElementById( clickedId ).parentNode.parentNode;
						deletableElement.parentNode.removeChild( deletableElement );
						
						var trTags = document.getElementsByTagName( "tr" );
						var deleteId = 0;
						
						for (var i = 0; i < trTags.length - 3; i++ )
						{
							deleteId = deleteId + 1;
							
							if( document.getElementById( "deleteButton" + deleteId ) === null )
							{
								document.getElementById( "deleteButton" + ( deleteId + 1) ).id = "deleteButton" + deleteId;
								document.getElementById( "subject" + ( deleteId + 1) ).id = "subject" + deleteId;
								document.getElementById( "homework" + ( deleteId + 1) ).id = "homework" + deleteId;
								document.getElementById( "deadline" + ( deleteId + 1) ).id = "deadline" + deleteId;
								
								valuesArray[deleteId][ 1 ] = valuesArray[deleteId + 1 ][ 1 ];
								valuesArray[deleteId][ 2 ] = valuesArray[deleteId + 1 ][ 2 ];
								valuesArray[deleteId][ 3 ] = valuesArray[deleteId + 1 ][ 3 ];
							}
						}
					}
				}
				
				function editFunction( columnId, columnName, clickedId )
				{
					var editId = document.getElementById( clickedId ).id.replace( columnId, "" );
					window.editId = editId;
								
					var deletableElement = document.getElementById( clickedId );
					
					var addTextbox = document.createElement( "td" );
					addTextbox.id = columnId + editId;
					addTextbox.innerHTML +=
							[
								'<input type="text" id="textHomework" onblur="saveClick(this.id)"/>'
							].join( "" );
					document.body.appendChild( addTextbox );
					document.getElementById( "textHomework" ).id = "text" + columnName;
					
					if ( columnId === "subject" )
					{
						document.getElementById( "text" + columnName ).value = valuesArray[ editId ][ 1 ];
					}
					
					else if ( columnId === "homework" )
					{
						document.getElementById( "text" + columnName ).value = valuesArray[ editId ][ 2 ];
					}
					
					else
					{
						document.getElementById( "text" + columnName ).type = "date";
						document.getElementById( "text" + columnName ).value = valuesArray[ editId ][ 3 ];
					}

					deletableElement.parentNode.replaceChild( addTextbox, deletableElement );

					document.getElementById( "text" + columnName ).focus();
				}
				
				function editClick( clickedId )
				{
					var clickId = document.getElementById( clickedId ).id;
					
					if ( isNaN( clickId.replace( "subject", "" ) ) === false )
					{
						editFunction( "subject", "Subject", clickedId );
					}
						
					else if ( isNaN( clickId.replace( "homework", "" ) ) === false )
					{
						editFunction( "homework", "Homework", clickedId );
					}
					
					else
					{
						editFunction( "deadline", "Deadline", clickedId );
					}
				}
				
				function saveFunction( columnId, columnName )
				{
					var deletableElement = document.getElementById( "text" + columnName ).parentNode;
					
					if ( columnId === "subject" )
					{
						valuesArray[ editId ][ 1 ] = document.getElementById( "textSubject" ).value;
					}
					
					else if ( columnId === "homework" )
					{
						valuesArray[ editId ][ 2 ] = document.getElementById( "textHomework" ).value;
					}
					
					else
					{
						valuesArray[ editId ][ 3 ] = document.getElementById( "textDeadline" ).value;
					}
					
					var addValue = document.createElement( "td" );
					addValue.id = columnId + editId;
					addValue.innerHTML +=
							[
								document.getElementById( "text" + columnName ).value
							].join( "" );
					document.body.appendChild(addValue);
					deletableElement.parentNode.replaceChild( addValue, deletableElement );
					
					if ( columnId === "subject" )
					{
						var subjectOnclick = document.getElementById( "subject" + editId );
						var onclickAttribute = document.createAttribute( "onclick" );
						onclickAttribute.value = "editClick(this.id)";
						subjectOnclick.setAttributeNode(onclickAttribute);
					}
					
					else if ( columnId === "homework" )
					{
						var homeworkOnclick = document.getElementById( "homework" + editId );
						onclickAttribute = document.createAttribute( "onclick" );
						onclickAttribute.value = "editClick(this.id)";
						homeworkOnclick.setAttributeNode(onclickAttribute);
					}
					
					else
					{
						document.getElementById( columnId + editId ).innerHTML = document.getElementById( columnId + editId ).innerHTML.replace( /\-/g, "." ) + ".";
						
						var deadlineOnclick = document.getElementById( "deadline" + editId );
						onclickAttribute = document.createAttribute( "onclick" );
						onclickAttribute.value = "editClick(this.id)";
						deadlineOnclick.setAttributeNode(onclickAttribute);
					}
				}
				
				function saveClick()
				{
					if ( document.getElementById( "textSubject" ) === null && document.getElementById( "textDeadline" ) === null )
					{
						saveFunction( "homework", "Homework" );
					}
					
					else if ( document.getElementById( "textDeadline" ) === null )
					{
						saveFunction( "subject", "Subject" );
					}
					
					else
					{
						saveFunction( "deadline", "Deadline" );
					}
				}
				
				var abc = [ [ "A", "a" ], [ "Á", "á" ], [ "B", "b" ], [ "C", "c" ], [ "CS", "Cs", "cs" ], [ "D", "d" ], [ "DZ", "Dz", "dz" ], [ "DZS", "DZs", "DzS", "dZS", "dzS", "dZs", "Dzs", "dzs" ], [ "E", "e" ], [ "É", "é" ], [ "F", "f" ], [ "G", "g" ], [ "GY", "Gy", "gy" ], [ "H", "h" ], [ "I", "i" ], [ "Í", "í" ], [ "J", "j" ], [ "K", "k" ], [ "L", "l" ], [ "LY", "Ly", "ly" ], [ "M", "m" ], [ "N", "n" ], [ "NY", "Ny", "ny" ], [ "O", "o" ], [ "Ó", "ó" ], [ "Ö", "ö" ], [ "Ő", "ő" ], [ "P", "p" ], [ "Q", "q" ], [ "R", "r" ], [ "S", "s" ], [ "SZ", "Sz", "sz" ], [ "T", "t" ], [ "TY", "Ty", "ty" ], [ "U", "u" ], [ "Ú", "ú" ], [ "Ü", "ü" ], [ "Ű", "ű" ], [ "V", "v" ], [ "W", "w" ], [ "X", "x" ], [ "Y", "y" ], [ "Z", "z" ], [ "ZS", "Zs", "zs" ] ];
				
				function sortBySubject()
				{
					var sortArray = [];
					
					for ( var i = 1; i <= addWhileId; i++ )
					{
						sortArray[ i - 1 ] = valuesArray[ i ][ 1 ];
					}
					
					var notEnd = true;
					var whileId = 0;
					var swapNumber = 0;
					
					while ( notEnd )
					{
						swapNumber = 0;
						
						if ( sortArray[ whileId + 1 ] === undefined )
						{
							if ( swapNumber === 0 )
							{
								notEnd = false;
							}
							
							else
							{
								whileId = 0;
							}
						}

						else if ( sortFunction( sortArray[ whileId ], sortArray[ whileId + 1 ] ) === "second" )
						{
							swapNumber++;
							
							var tempString = sortArray[ whileId ];
							sortArray[ whileId ] = sortArray[ whileId + 1 ];
							sortArray[ whileId + 1 ] = tempString;
							
							console.log( sortArray );
						}
						
						whileId++;
					}
				}
				
				function sortFunction( firstWord, secondWord )
				{
					var firstWordId = [];
					var secondWordId = [];
					
					for ( var i = 0; i < firstWord.length; i++ )
					{
						
						for ( var j = 0; j < abc.length; j++ )
						{
							
							for ( var k = 0; k < abc[ j ].length; k++ )
							{
								if ( firstWord[ i ] == abc[ j ][ k ] )
								{
									firstWordId.push( j );
								}
							}
						}
					}
					
					for ( var i = 0; i < secondWord.length; i++ )
					{
						
						for ( var j = 0; j < abc.length; j++ )
						{
							
							for ( var k = 0; k < abc[ j ].length; k++ )
							{
								if ( secondWord[ i ] == abc[ j ][ k ] )
								{
									secondWordId.push( j );
								}
							}
						}
					}
					
					var isTrue = true;
					var whileId = -1;
					
					while ( isTrue )
					{
						whileId++;
						
						if ( firstWordId[ whileId ] === undefined  )
						{
							return "first";
							
							isTrue = false;
						}
						
						else if ( secondWordId[ whileId ] === undefined )
						{
							return "second";
							
							isTrue = false;
						}
						
						else if ( firstWordId[ whileId ] < secondWordId[ whileId ] )
						{
							return "first";
							
							isTrue = false;
						}
						
						else if ( firstWordId[ whileId ] > secondWordId[ whileId ] )
						{
							return "second";
							
							isTrue = false;
						}
					}
				}
		</script>
		
	</body>
	
</html>